. gen tenure = (stopyear - startyear)
(197 missing values generated)

. replace tenure=. if empstatus=="Retired"| empstatus=="Unemployed"
(669 real changes made, 669 to missing)

. by wid:gen experience= sum(tenure)

. list wid startdate stopdate empstatus tenure experience in 16/35, sepby(wid)

     +-------------------------------------------------------------------+
     |     wid   startd~e   stopdate       empstatus   tenure   experi~e |
     |-------------------------------------------------------------------|
 16. | 2201101     1947m1    1959m11   Wage employed       12         12 |
 17. | 2201101    1959m11     1985m9   Wage employed       26         38 |
 18. | 2201101     1985m9     1995m1   Wage employed       10         48 |
 19. | 2201101     1995m1     2005m8   Self employed       10         58 |
     |-------------------------------------------------------------------|
 20. | 2201102     1957m6     1997m6      Unemployed        .          0 |
 21. | 2201102     1997m6     2005m8   Self employed        8          8 |
 22. | 2201102     1999m8     2006m7   Self employed        7         15 |
     |-------------------------------------------------------------------|
 23. | 2201201     1980m1    1998m12   Wage employed       18         18 |
 24. | 2201201     1999m1    2002m12   Wage employed        3         21 |
 25. | 2201201     2003m5     2005m8   Self employed        2         23 |
 26. | 2201201     2006m7     2006m8   Wage employed        0         23 |
     |-------------------------------------------------------------------|
 27. | 2201202     2005m8     2006m7   Wage employed        1          1 |
     |-------------------------------------------------------------------|
 28. | 2201301     1974m1     2005m8   Self employed       31         31 |
     |-------------------------------------------------------------------|
 29. | 2201302          .     2006m7                        .          0 |
     |-------------------------------------------------------------------|
 30. | 2201303     2006m7     2006m8   Wage employed        0          0 |
     |-------------------------------------------------------------------|
 31. | 2201304     2005m8     2006m7   Wage employed        1          1 |
     |-------------------------------------------------------------------|
 32. | 2201401    1977m10     1983m4      Unemployed        .          0 |
 33. | 2201401     1983m6     1996m1   Wage employed       13         13 |
 34. | 2201401     1996m3     1999m6      Unemployed        .         13 |
 35. | 2201401     1999m7     2004m7   Wage employed        5         18 |
     +-------------------------------------------------------------------+
